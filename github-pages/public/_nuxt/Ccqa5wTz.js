import{r as w,o as R,L as M,M as y,G as D,N as G,O as T,P as W,Q as z,R as N,S as U,c as $,K as H,d as V,t as x,v as k,T as O,U as j,V as I,W as q,x as C,z as A}from"./kuvq66AN.js";function P(e,{volume:t=1,playbackRate:o=1,soundEnabled:r=!0,interrupt:s=!1,autoplay:a=!1,onload:v,...f}={}){const d=w(null),p=w(!1),h=w(null),u=w(null);function g(){var n;typeof v=="function"&&v.call(this),h.value=(h.value||((n=u.value)==null?void 0:n.duration())||0)*1e3,a===!0&&(p.value=!0)}return R(async()=>{const n=await M(()=>import("./CCqh-U3u.js").then(l=>l.h),[],import.meta.url);d.value=n.default.Howl,u.value=new d.value({src:y(e),volume:y(t),rate:y(o),onload:g,...f})}),D(()=>[e],()=>{d.value&&d.value&&u&&u.value&&(u.value=new d.value({src:y(e),volume:y(t),rate:y(o),onload:g,...f}))}),D(()=>[y(t),y(o)],()=>{u.value&&(u.value.volume(y(t)),u.value.rate(y(o)))}),{play:n=>{typeof n>"u"&&(n={}),!(!u.value||!r&&!n.forceSoundEnabled)&&(s&&u.value.stop(),n.playbackRate&&u.value.rate(n.playbackRate),u.value.play(n.id),u.value.once("end",()=>{u.value&&u.value&&!u.value.playing()&&(p.value=!1)}),p.value=!0)},sound:u,isPlaying:p,duration:h,pause:n=>{u.value&&(u.value.pause(typeof n=="number"?n:void 0),p.value=!1)},stop:n=>{u.value&&(u.value.stop(typeof n=="number"?n:void 0),p.value=!1)}}}function L(e){return N()?(U(e),!0):!1}function F(e){return typeof e=="function"?e():y(e)}const E=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const K=()=>{};function Q(...e){if(e.length!==1)return G(...e);const t=e[0];return typeof t=="function"?T(W(()=>({get:t,set:K}))):w(t)}function J(e,t=1e3,o={}){const{immediate:r=!0,immediateCallback:s=!1}=o;let a=null;const v=w(!1);function f(){a&&(clearInterval(a),a=null)}function d(){v.value=!1,f()}function p(){const h=F(t);h<=0||(v.value=!0,s&&e(),f(),a=setInterval(e,h))}if(r&&E&&p(),z(t)||typeof t=="function"){const h=D(t,()=>{v.value&&E&&p()});L(h)}return L(d),{isActive:v,pause:d,resume:p}}const X=E?window.navigator:void 0;function Y(){const e=w(!1),t=H();return t&&R(()=>{e.value=!0},t),e}function Z(e){const t=Y();return $(()=>(t.value,!!e()))}function ee(e){const{pattern:t=[],interval:o=0,navigator:r=X}=e||{},s=Z(()=>typeof r<"u"&&"vibrate"in r),a=Q(t);let v;const f=(p=a.value)=>{s.value&&r.vibrate(p)},d=()=>{s.value&&r.vibrate(0),v==null||v.pause()};return o>0&&(v=J(f,o,{immediate:!1,immediateCallback:!1})),{isSupported:s,pattern:t,intervalControls:v,vibrate:f,stop:d}}const B=()=>{const e=["o","x",null];return{generateRandom:()=>{let s=[];for(let a=0;a<9;a++){let v=a%3,f=parseInt(String(a/3)),d=e[Math.floor(Math.random()*e.length)];s.push({x:f,y:v,value:d,mark:!1})}return s},generateEmpty:()=>{let s=[];for(let a=0;a<9;a++){let v=a%3,f=parseInt(String(a/3));s.push({x:f,y:v,value:null,mark:!1})}return s},generatePlayers:()=>{let s=[];for(let a=0;a<2;a++){const f=["blue","red"][a];s.push({name:`Player ${a+1}`,created_at:new Date().getTime(),side:f})}return s}}},te=(e,t,o,r)=>{let s=!1;const a=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],{generateEmpty:v}=B(),f=()=>{o.value=o.value==0?1:0,r!=null&&r.onPlayerTurn&&r.onPlayerTurn(o.value)},d=()=>{const g=o.value===0?"x":"o",_=e.value.map((i,c)=>({i:c,...i})).filter(i=>i.value===g&&!i.deprecated).map(i=>i.i),m=[];if(_.forEach(i=>{a.forEach((c,n)=>{c.forEach(l=>{if(i==l){let S=m.findIndex(b=>b.cond===n);if(S>-1){const b=m[S].point+1;if(m[S].point=b,b===3){s=!0;return}}else m.push({cond:n,point:1})}})})}),s){const i=m.findIndex(l=>l.point===3),c=m[i].cond;a[c].forEach(l=>{e.value[l].mark=!0}),r!=null&&r.onWin&&r.onWin()}},p=()=>{e.value=v(),t.value=[],s=!1},h=()=>{const g=o.value===0?"x":"o",_=o.value===0?"o":"x";if(e.value.filter(i=>i.value===g).length>=3){const c=t.value.filter(n=>n.value===_).reverse().find((n,l)=>l==2);e.value.forEach((n,l)=>{n.x===(c==null?void 0:c.x)&&n.y===(c==null?void 0:c.y)&&(e.value[l].deprecated=!0)})}e.value.forEach((i,c)=>{i.deprecated===!0&&i.value===g&&(e.value[c].value=null)})};return{playerDraw:(g,_)=>{if(s){p();return}const m=e.value.findIndex(i=>i.x===_.x&&i.y===_.y);(e.value[m].value==null||e.value[m].deprecated)&&(e.value[m].value=g.side==="blue"?"o":"x",e.value[m].deprecated=void 0,t.value.push({x:_.x,y:_.y,player:g,value:e.value[m].value,created_at:new Date().getTime()}),r!=null&&r.onPlayerDraw&&r.onPlayerDraw(o.value),f(),d(),h())}}},ae=""+new URL("happy-pop-2-185287.BDyL3yVR.mp3",import.meta.url).href,ne=""+new URL("papercrackle3-36110.CeTqCxM9.mp3",import.meta.url).href,re=""+new URL("sound-effect-twinklesparkle-115095.dNaezRRh.mp3",import.meta.url).href,le={class:"aspect-square grid grid-cols-3 grid-rows-3 gap-1"},se=["onClick"],ue={key:0},oe={xmlns:"http://www.w3.org/2000/svg",width:"4rem",height:"4rem",viewBox:"0 0 24 24",style:{}},ie=C("path",{d:"m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"},null,-1),ce=[ie],ve={key:1},fe={xmlns:"http://www.w3.org/2000/svg",width:"3.2rem",height:"3.2rem",viewBox:"0 0 24 24",style:{}},de=C("path",{d:"M12 2C6.486 2 2 6.486 2 12c.001 5.515 4.487 10.001 10 10.001 5.514 0 10-4.486 10.001-10.001 0-5.514-4.486-10-10.001-10zm0 18.001c-4.41 0-7.999-3.589-8-8.001 0-4.411 3.589-8 8-8 4.412 0 8.001 3.589 8.001 8-.001 4.412-3.59 8.001-8.001 8.001z"},null,-1),pe=[de],me=V({__name:"GameBoard",emits:["update:player-turn"],setup(e,{emit:t}){const o=P(ae),r=P(ne),s=P(re),{vibrate:a,isSupported:v}=ee({pattern:[300,100,300]}),f=t,d=w([]),p=w([]),h=w([]),u=w(0),{generateEmpty:g,generatePlayers:_}=B(),{playerDraw:m}=te(d,p,u,{onPlayerTurn(c){f("update:player-turn",c)},onPlayerDraw(c){c==0?(o.isPlaying.value&&o.stop(),o.play()):(r.isPlaying&&r.stop(),r.play()),v.value&&a()},onWin(){s.isPlaying.value&&s.stop(),s.play()}}),i=c=>{const n=h.value[u.value];m(n,c)};return R(()=>{d.value=g(),h.value=_(),f("update:player-turn",u.value)}),(c,n)=>(x(),k("div",le,[(x(!0),k(O,null,j(y(d),(l,S)=>(x(),k("div",{key:S,onClick:b=>i({x:l.x,y:l.y}),class:I(["bg-slate-800 rounded-lg text-white flex flex-col justify-center items-center fill-slate-100 transition-all cursor-pointer hover:ring",[{"hover:ring-blue-800 active:bg-blue-900":y(u)===0&&l.value===null&&!l.mark,"hover:ring-rose-800 active:bg-rose-900":y(u)===1&&l.value===null&&!l.mark,"hover:ring-blue-800":l.value==="o"&&!l.mark,"hover:ring-rose-800":l.value==="x"&&!l.mark,"!bg-blue-800 hover:ring-0":l.value==="o"&&l.mark,"!bg-rose-800 hover:ring-0":l.value==="x"&&l.mark,"!fill-slate-600 delay-200":l.deprecated}]])},[l.value==="x"?(x(),k("div",ue,[(x(),k("svg",oe,ce))])):l.value==="o"?(x(),k("div",ve,[(x(),k("svg",fe,pe))])):q("",!0)],10,se))),128))]))}}),ye={class:"bg-slate-950 min-h-screen text-white flex flex-col items-center"},he={class:"max-w-sm w-full h-screen flex flex-col justify-center gap-2 p-2"},we=V({__name:"index",setup(e){const t=w(0),o=r=>{t.value=r};return(r,s)=>{const a=me;return x(),k("div",ye,[C("div",he,[C("div",{class:I(["p-6 bg-slate-900 rounded-lg rotate-180 grow transition-all",[{"ring ring-rose-400":y(t)===1}]])}," Player 2 ",2),C("div",null,[A(a,{"onUpdate:playerTurn":o})]),C("div",{class:I(["p-6 bg-slate-900 rounded-lg grow transition-all",[{"ring ring-blue-400":y(t)===0}]])}," Player 1 ",2)])])}}});export{we as default};
